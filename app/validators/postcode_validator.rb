################################################################
################################################################
##           _____         _                _                 ##
##          | ___ \       | |              | |                ##
##          | |_/ /__  ___| |_ ___ ___   __| | ___            ##
##          |  __/ _ \/ __| __/ __/ _ \ / _` |/ _ \           ##
##          | | | (_) \__ \ || (_| (_) | (_| |  __/           ##
##          \_|  \___/|___/\__\___\___/ \__,_|\___|           ##
##                                                            ##
################################################################
################################################################
##           Allows us to validate UK postcodes               ##
## https://github.com/threedaymonk/uk_postcode#tips-for-rails ##
################################################################
################################################################

class PostcodeValidator < ActiveModel::EachValidator
  def validate_each(record, attribute, value)
    ukpc = UKPostcode.parse(value)
    unless ukpc.full_valid?
      record.errors[attribute] << "not recognised as a UK postcode"
    end
  end
end

################################################################
################################################################
