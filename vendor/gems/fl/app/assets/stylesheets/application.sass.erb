////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////
//     ___              _ _           _   _               //
//    / _ \            | (_)         | | (_)              //
//   / /_\ \_ __  _ __ | |_  ___ __ _| |_ _  ___  _ __    //
//   |  _  | '_ \| '_ \| | |/ __/ _` | __| |/ _ \| '_ \   //
//   | | | | |_) | |_) | | | (_| (_| | |_| | (_) | | | |  //
//   \_| |_/ .__/| .__/|_|_|\___\__,_|\__|_|\___/|_| |_|  //
//         | |   | |                                      //
//         |_|   |_|                                      //
//                                                        //
////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////

// Icons
<%
  gem_name = 'font-awesome-rails'
  gdep = Gem::Dependency.new(gem_name)
%>

////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////

// Defaults
<%= FL::AssetHelper.sass File.join(File.dirname(__FILE__), "_defaults.yml"), true %>

////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////

// Main
@import variables
@import functions
@import formtastic

// Libraries
@import <%= gdep.matching_specs.max_by(&:version) ? "font-awesome" : "ionicons" %>

////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////

// Styling
@import styles/**/*

////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////

// Main
html,
body
  height: 100%
  margin: 0

// Main
// This is hacky but whatever (should be stored in main app)
body

  // Vars
  $container: 850px

  // General
  font:
    family: 'Montserrat', sans-serif

  ////////////////////////////////
  ////////////////////////////////

  // Sticky Footer
  // Use Flexbox :D
  // https://philipwalton.github.io/solved-by-flexbox/demos/sticky-footer/
  display: flex
  min:
    height: 100vh
  flex:
    direction: column

  ////////////////////////////////
  ////////////////////////////////

  // Styling
  .container
    display:    block
    width:      $container
    margin:     auto
    box:
      sizing:   border-box

  ////////////////////////////////
  ////////////////////////////////

  // Header
  header
    display: block
    position: relative
    padding: 0
    color: rgba(255,255,255,1)
    background: rgba(0,0,0,0.65)

    // Navigation
    nav

      // Top
      .top
        display: block
        color: rgba(255,255,255,1)
        background: rgba(0,0,0,1)
        margin:
          bottom: 1.5em
        font:
          size: 0.85em
        .container
          display: block
          text:
            align: right
          a
            display: inline-block
            padding: 0.5em 0
            &.phone
              display: inline-block
              background: rgba(255,255,255,0.15)
              padding:
                left: 0.5em
                right: 0.5em
              margin:
                left: 0.5em
              text:
                decoration: none
            &.claim
              display: inline-block
              color: rgba(255,255,255,1)
              background: rgba(255,255,255,0.15)
              padding: 5px
              transition: color 0.15s ease-in-out, background 0.15s ease-in-out
              margin:
                left: 7px
              text:
                decoration: none
              &:hover
                opacity: 1
                color: $base-color
                background: rgba(255,255,255,0.1)

      // Container
      .container

        // Logo
        .logo
          width: auto
          text:
            align: center
          a
            display: inline-block
            padding:
              right: 50px
            &:hover
              opacity: 1
            img
              display: block
              height: 100px

        // Claims
        .claims
          margin:
            top: 1em
          span
            display: block
            text:
              align: center

      // Links
      .links
        display: block
        margin:  1.25em 0 0
        background: rgba(0,0,0,1)
        white:
          space: nowrap
        font:
          size: 1.25em
        &:hover
          a
            opacity: 0.5
        &.current
          a
            opacity: 0.25
            &.current
              opacity: 1
        text:
          align: center
          transform: uppercase
        a
          display: inline-block
          padding: 0.75em
          background: rgba(255,255,255,0.2)
          font:
            weight: bold
          text:
            decoration: none
          &:hover
            opacity: 1 !important

  ////////////////////////////////
  ////////////////////////////////

  // Main
  main
    position: relative

    // Sticky Footer
    // https://philipwalton.github.io/solved-by-flexbox/demos/sticky-footer/
    flex: 1

    // Links
    a
      color: rgba(0,0,0,1)

    // Container
    .container
      padding: 0 2em
      color: rgba(0,0,0,1)
      background: rgba(255,255,255,1)
      box:
        shadow: 0 0 30px 20px rgba(0,0,0,1)

      // Exception
      .exception
        display: block
        padding: 2em 0
        font:
          size: 1.75em
          weight: bold
        text:
          align: center
        &:before
          display: block
          content: "⚠️"
          margin:
            bottom: 0.05em
          font:
            size: 2.5em
            weight: bold

    // General
    h1
      &.title
        display: block
        padding: 1em 0 0.5em
        font:
          weight: bold

    // Intro
    .intro
      padding: 1em
      color: rgba(255,255,255,1)
      background: rgba(0,0,0,1)
      margin:
        bottom: 1em
      box:
        sizing: border-box

    // Flash
    .flash
      > div
        diplay: block !important
        width: 100%
        padding: 1em
        margin:  1em 0
        font:
          weight: bold
        line:
          height: 1.5em
        box:
          sizing: border-box
        vertical:
          align: middle
        &:hover
          cursor: pointer
        &.notice
          background: rgba(0,255,40,0.075)
          border:
            color: rgba(0,255,40,1)
            size: 1px !important
            style: solid
          &:before
            content: "✔️"
            display: inline-block
            margin:
              right: 0.25em
            font:
              size: 1.25em

    // General
    .formtastic
      .action
        float: none
        padding:
          right: 0 !important
      .inputs
        overflow: visible
      .errors
        padding: 1.5em
        margin: 0 0 1em 0
        color: rgba(255,255,255,1)
        background: rgba(255,0,0,1)
        font:
          size: 1em
          weight: bold
        list:
          style: none !important
        li
          vertical:
            align: middle
          &:before
            display: inline-block
            content: "⚠️"
            font:
              size: 1.35em
            margin:
              right: 0.25em
            text:
              shadow: none
            vertical:
              align: middle

    // News
    &.news

      // Container
      // Flexbox
      .container

        // Intro
        .intro
          position: sticky
          top: 0
          z:
            index: 1001

        // Panels
        // Used to provide hover functionality etc
        .panels
          display: flex
          flex:
            wrap: wrap
            direction: row
          justify:
            content: space-between
          align:
            items:   stretch
            content: space-between

          // Hover
          &:hover
            .panel
              opacity: 0.45

          // Individual
          .panel
            position: relative
            display: block
            width:    33%
            overflow: hidden
            padding:  0.5em 0
            transition: opacity 0.15s ease-in-out
            box:
              sizing: border-box
            margin:
              bottom: 0.5em

            // Hover
            &:hover
              opacity: 1

            // Link
            a
              display: block
              height: 500px
              max:
                height: 500px
              text:
                decoration: none
              overflow:
                y: hidden

              // Date
              &:after
                display:  block
                position: absolute
                padding:  0.5em
                content:  attr(data-published)
                color: rgba(255,255,255,1)
                background: rgba(0,0,0,1)
                top: 0
                left: 0

              // Hover
              &:hover
                opacity: 1

              // Image
              .featured
                display: block
                width:   100%
                height:  215px
                overflow: hidden
                img
                  display: block
                  width: 100%
                  min:
                    height: 100%

              // Title
              h3
                &.title
                  margin:  0.5em 0
                  padding: 0 10px
                  font:
                    size: 1.35em

              // Content
              .content
                padding: 0 10px
                box:
                  sizing: boder-box
                ul
                  margin: 1em 0
                h1
                  margin: 0 0 0.5em

              // CTA
              .button
                display: inline-block
                position: absolute
                right: 0
                bottom: 0
                color: rgba(255,255,255,1)
                border: 0
                padding: 0.25em 0.5em
                &:hover
                  cursor: pointer
                  opacity: 1 !important

    // FAQ
    // Simple accordion-style
    &.faq

      // CSS-only accordion
      // The following is from https://codepen.io/jonyablonski/pen/wreap
      $timing: .25s
      $ease: cubic-bezier(0.865, 0.140, 0.095, 0.870)

      // Container
      // Main accordion block
      .container
        padding:
          bottom: 0.5em

        // Used for panels
        // Really should integrate with .container but works for now
        .panels

          // Hover
          &:hover
            .panel
              opacity: 0.85

          // Panel
          .panel
            transition: all $timing $ease
            padding:
              bottom: 0.5em
            &:hover
              opacity: 1

            // Input
            input
              &[name='panel']
                display: none
                &:checked
                  & + label
                    background: rgba(0,0,0,1)
                  ~ .content
                    display: block
                    visibility: visible
                    height: auto

            // Header
            label
              position:   relative
              display:    block
              padding:    1em
              cursor:     pointer
              color:      rgba(255,255,255,1)
              background: rgba(0,0,0,1)
              transition: all $timing $ease
              font:
                size:   1.5em
                weight: bold

            // Content
            .content
              display: none
              visibility: hidden
              height: 0
              padding: 1em 1em 0
              transition: all $timing $ease
              box:
                sizing: border-box
              font:
                size: 1.05em
              margin:
                bottom: 1em

    // Claims
    &.claims

      // Form
      form
        padding:
          top: 0

        // Inputs
        fieldset
          position: relative
          display: block

          // Legend
          legend
            display: block
            position: sticky
            top: 0
            width: 100%
            margin: 1em 0
            padding: 1em
            background: rgba(#ccc,0.75)
            font:
              size: 1.5em
              weight: bold
            box:
              sizing: border-box

          // Inputs
          ol
            padding: 0 0.75em

          // Last Boolean Section
          &.bools
            &:hover
              ol
                li
                  opacity: 0.55
            ol
              li
                &:hover
                  opacity: 1

          // Actions
          &.actions
            padding:
              top:  0.25em
              left: 0 !important
            ol
              padding: 0 !important
            input
              &[type='submit']
                display: block
                width: 100%
                margin: 0.5em 0 1em
                color: rgba(255,255,255,1)
                background: rgba(0,0,0,1) !important
                border: none
                transition: background 0.15s ease-in-out
                box:
                  sizing: border-box
                &:hover
                  background: rgba(0,0,0,1)
                  text:
                    decoration: underline

        // General List
        ul,
        ol
          margin:
            left: 0
          padding:
            left: 0
          list:
            style: none
          li
            width: auto
            &.error
              input,
              textarea
                border: 1px solid rgba(255,0,0,1)
            label
              width: none
              abbr
                display: inline-block
                color: rgba(255,0,0,1)
                padding: 0 0.5em
            input,
            textarea
              border: 1px solid rgba(0,0,0,1)
              transition: color 0.15s ease-in-out
              margin:
                left: 0 !important
              &:hover
                &:placeholder
                  color: rgba(0,0,0,1) !important
            textarea
              padding: 10px

            // Checkboxes
            &.boolean
              display: block
              padding: 0.15em 0
              margin:  0
              transition: opacity 0.15s ease-in-out
              &:hover
                label
                  cursor: pointer
                  font:
                    weight: bold
              label
                display: block
                overflow: hidden
                padding:
                  left: 0
                box:
                  sizing: border-box
                text:
                  overflow: ellipsis
              input
                display: inline-block
                position: relative
                background: rgba(255,255,255,1)
                appearance: none
                padding: 1em
                border: 1px solid rgba(0,0,0,1)
                margin:
                  left:  0
                  right: 0.75em
                &:checked
                  &:after
                    content: '✔️'
                    display: block
                    font-size: 14px
                    position: absolute
                    top: 30%
                    left: 2px
                    color: #99a1a7

            .inline-errors
              display: block
              color: rgba(255,0,0,1)
              font:
                weight: bold

      // Form
      form
        display: block

        ol
          li
            padding: 2px 0
            input
              display: inline-block
              padding: 10px
              margin:
                  left: 150px
              vertical:
                align: middle

  ////////////////////////////////
  ////////////////////////////////

  // Footer
  footer
    color: rgba(255,255,255,1)
    background: rgba(0,0,0,1)
    padding: 2.5em 1.5em
    position: relative

    // Container
    .container
      display: flex
      justify:
        content: space-between
      align:
        items: top

      // Each div
      > div
        width: 50%

      // Company
      .company
        > div
          margin:
            bottom: 0.25em
          &:before
            display: inline-block
            margin:
              right: 0.25em
        .title
          font:
            size: 1.35em
            weight: bold
          &:after
            display:  block
            content:  " "
            margin:   15px 0 10px
            width:    20px
            height:   3px
            background: rgba(255,255,255,1)
          a
            &.reviews
              display: block
              color: transparent
              width: 200px
              padding: 0.65em 0
              background:
                image: asset_url('tp.png')
                size:  contain
                repeat: space
              &:hover
                color: transparent
                text:
                  decoration: none
        .email
          &:before
            content: "✉️"
        .office
          &:before
            content: "🏢"
        .number
          &:before
            content: "💼"

      // Contact
      .contact
        text-align: right

////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////
